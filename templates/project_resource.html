{% extends 'base.html' %}
{% load static %}

{% block customcss %}
{% endblock customcss %}

{% block header %}
<h1>案件リソース管理</h1>
{% endblock header %}

{% block content %}
<div class="container">
  <div class="alert alert-success" role="alert">
    <p>{{ project.name }} [{{ project.start_date }} - {{ project.end_date }}] {{ project.phase }}</p>
  </div>
  <form action="" method="POST">{% csrf_token %}
    <!-- TODO: 後でcssで真ん中寄せ -->
    <table border="1" align="center">
      <tr align="center">
        <th width="100" rowspan="2">月</th>
        {% for project_month in project_month_list %}
        <th colspan="2">{{ project_month }}</th>
        {% endfor %}
      </tr>
      <tr align="center">
        {% for project_month in project_month_list %}
        <th width="50">予定</th>
        <th width="50">実績</th>
        {% endfor %}
      </tr>
      {% for project_member in project_member_list %}
      <tr align="center">
        <th>{{ project_member.user.username }}</th>
        {% for monthly_working_time in monthly_working_time_list %}
        {% if monthly_working_time.project_member.user == project_member.user %}
        <td>
          <input
            style="width:50px;"
            type="number"
            value={{ monthly_working_time.planed_working_time }}
            name="{{ monthly_working_time.project_member_id }}_{{ monthly_working_time.target_month }}_planed"
            class="monthly_working_time"
          >
        </td>
        <td>
          <input
            style="width:50px;"
            type="number"
            value={{ monthly_working_time.actual_working_time }}
            name="{{ monthly_working_time.project_member_id }}_{{ monthly_working_time.target_month }}_actual"
            class="monthly_working_time"
          >
        </td>
        {% endif %}
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
    <input type="text" name="updated_list" id="updated_list" hidden>
    <input type="submit" value="更新">
  </form>
</div>
{% endblock content %}

{% block script %}
<script src="{% static 'project_resource.js' %}"></script>
{% endblock script %}
